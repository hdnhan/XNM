-- FreeFem++ v  3.610001 (date jeu. 12 juil. 2018 15:05:23)
 Load: lg_fem lg_mesh lg_mesh3 eigenvalue
    1 : load "medit"(load: loadLibary C:\Program Files (x86)\FreeFem++\\.\medit = 0)
    2 :
    3 : string path = "data/";
    4 : int nthfile = 3;
    5 : string filemesh = "Th" + nthfile;
    6 : mesh Thold = readmesh(path + filemesh + ".msh");
    7 : //medit("Thold", Thold);
    8 :
    9 : int[int] NoVMesh = [515, 1802, 6718];
   10 : real[int, int] hz(NoVMesh[nthfile - 1], 3);
   11 : ifstream filemeshZ(path + filemesh + "CoZ.txt");
   12 : filemeshZ >> hz;
   13 :
   14 : real[string] mapz;
   15 : for (int i = 0; i < hz.n; i++){
   16 :     mapz[string(hz(i, 0)) + " " + string(hz(i, 1))] = hz(i, 2);
   17 : }
   18 :
   19 : func real[int] FillZ(real[int] mat){
   20 :     for (int i = 0; i < Thold.nv; i++){
   21 :         mat(i) = mapz[string(Thold(i).x) + " " + string(Thold(i).y)];
   22 :     }
   23 :     return mat;
   24 : }
   25 :
   26 : real[int, int] data(503, 4);
   27 : ifstream filedata(path + "SLMIKE21-3.txt");
   28 : filedata >> data;
   29 :
   30 : func real[int] InterpolationData(real t){
   31 :     // t: time (unit: second)
   32 :     real T = 3600;
   33 :     int n = t /  T;
   34 :     real delt = t / T - n;
   35 :     real[int] res(4);
   36 :     res(0) = data(n, 0) * delt + data(n + 1, 0) * (1 - delt);
   37 :     res(1) = data(n, 1) * delt + data(n + 1, 1) * (1 - delt);
   38 :     res(2) = data(n, 2) * delt + data(n + 1, 2) * (1 - delt);
   39 :     res(3) = data(n, 3) * delt + data(n + 1, 3) * (1 - delt);
   40 :     return res;
   41 : }
   42 :
   43 : real dt = 1e-2, nu = 2.67 * 1e-4, g = 9.81, rho = 1000, n = 0.025, T = 9999999;
   44 : real tau =  g * n * n;
   45 : real eps = 0.05;
   46 :
   47 : macro Grad(u) [dx(u), dy(u)]  )   [dx(u), dy(u)] //
   48 : macro Grad1(ux, uy) [dx(ux), dy(ux), dx(uy), dy(uy)]  )   [dx(ux), dy(ux), dx(uy), dy(uy)] //
   49 : macro Grad2(ux, uy) [[dx(ux), dy(ux)], [dx(uy), dy(uy)]]  )   [[dx(ux), dy(ux)], [dx(uy), dy(uy)]] //
   50 : macro Div(ux, uy) (dx(ux) + dy(uy))  )   (dx(ux) + dy(uy)) //
   51 :
   52 :
   53 : fespace Xhold(Thold, P1);
   54 : Xhold zh; zh[] = FillZ(zh[]);
   55 : Xhold H, phi, Hold = 9 - zh;
   56 : Xhold uxold = 0.5, uyold = 0;
   57 : Xhold ux, uy;
   58 :
   59 : int cnt = 0;
   60 : string foldername = "result3/";
   61 :
   62 : for(real t = dt; t <= dt; t += dt){
   63 :     cout << "t: " << t << endl;
   64 :     real[int] BoundData = InterpolationData(t);
   65 :     Xhold etaUB = BoundData(1);
   66 :     Xhold etaUB1 = BoundData(2);
   67 :     Xhold etaUB2 = BoundData(3);
   68 :
   69 :     solve TransportEquation(H, phi) =
   70 :         int2d(Thold)(H * phi / dt) - int2d(Thold)(Hold * phi / dt)
   71 :         //+ int2d(Th)(Grad(H)' * [ux, uy] * phi + H * Div(ux, uy) * phi)
   72 :         - int2d(Thold)(H * [ux, uy]' * Grad(phi)    [dx(phi), dy(phi)] )
   73 :         + on(2, H = etaUB - zh) + on(1, H = 0);// + on(3, H = etaUB1 - zh) + on(4, H = etaUB2 - zh);
   74 :
   75 :     mesh Thwet = trunc(Thold, H >= eps );
   76 :     // mesh Thdry = trunc(Thold, H <= eps, split = 3, label = 6);
   77 :     medit("test", Thdwet) The Identifier Thdwet does not exist
 
 Error line number 77, in file D:\Study\Projects\XNM\code\XNM3.edp, before  token )
 
  current line = 77
Compile error :
        line number :77, )
error Compile error :
        line number :77, )
 code = 1 mpirank: 0
 try getConsole D:\Study\Projects\XNM\code\XNM3.edp
